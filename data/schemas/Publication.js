import * as Yup from "yup";

const PUBLICATION_FIELDS = [
  {
    label: "Title",
    value: "",
    info: "Title of the Paper",
    excel_field_name: "Title",
    excel_col_width: 40,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "title",
    validation: Yup.string().min(5, "Too Short!").max(100, "Too Long!").required("Required!"),
  },
  {
    label: "Author's Name",
    value: "",
    info: "Name of the Author of the paper",
    excel_field_name: "Author's Name",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "name_of_auth",
    validation: Yup.string().min(5, "Too Short!").max(80, "Too Long!").required("Required!"),
  },
  {
    label: "Published on",
    value: "",
    info: "Year of Publication of the paper",
    excel_field_name: "Published on",
    excel_col_width: 20,
    type: "string",
    input_type: "date",
    required: true,
    db_field: "yop",
    validation: Yup.date().required("Required!"),
  },
  {
    label: "Journal",
    value: "",
    info: "Name of the Journal",
    excel_field_name: "Journal",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "journal_name",
    validation: Yup.string().min(1, "Too Short!").max(30, "Too Long!").required("Required!"),
  },
  {
    label: "Coverage",
    value: "",
    info: "National/ International",
    excel_field_name: "Coverage",
    excel_col_width: 20,
    type: "string",
    input_type: "select",
    options: ["National", "International"],
    required: true,
    db_field: "nat_inter_imp",
    validation: Yup.string().required("Required!"),
  },
  {
    label: "Impact" /*make this field a color value*/,
    value: "",
    info: "Impact Factor",
    excel_field_name: "Impact Factor",
    excel_col_width: 20,
    type: "number",
    input_type: "text",
    required: true,
    db_field: "impact_factor",
    validation: Yup.string().required("Required!"),
  },
  {
    label: "Volume No.",
    value: "",
    info: "Volume No. of the paper",
    excel_field_name: "Volume No.",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "vol_no",
    validation: Yup.string().min(1, "Too Short!").max(10, "Too Long!").required("Required!"),
  },
  {
    label: "Issue No.",
    value: "",
    info: "Issue No. of the paper",
    excel_field_name: "Issue No.",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "issue_no",
    validation: Yup.string().min(1, "Too Short!").max(10, "Too Long!").required("Required!"),
  },
  {
    label: "Page No.",
    value: "",
    info: "Page No. of the paper",
    excel_field_name: "Page No",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "page_no",
    validation: Yup.string().min(1, "Too Short!").max(10, "Too Long!").required("Required!"),
  },
  {
    label: "ISSN/ISBN",
    value: "",
    info: "ISSN/ISBN of the paper",
    excel_field_name: "ISSN/ISBN",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "issn_isbn",
    validation: Yup.string().min(5, "Too Short!").max(50, "Too Long!").required("Required!"),
  },
  {
    label: "Indexing",
    value: "",
    info: "Indexing of the paper",
    excel_field_name: "Indexing",
    excel_col_width: 20,
    type: "string",
    input_type: "text",
    required: true,
    db_field: "indexing",
    validation: Yup.string().min(5, "Too Short!").max(50, "Too Long!").required("Required!"),
  },
  {
    label: "Students Involved",
    value: "",
    info: "Number of students involved (if any)",
    excel_field_name: "Students Involved",
    excel_col_width: 20,
    type: "number",
    input_type: "text",
    required: true,
    db_field: "studs_involved",
    validation: Yup.string().required("Required!"),
  },
  {
    label: "Invited Paper",
    value: false,
    info: "Whether the paper was an invited paper ? Input Yes/No",
    excel_field_name: "Invited Paper",
    excel_col_width: 20,
    type: "boolean",
    input_type: "checkbox",
    required: true,
    db_field: "inv_paper",
    validation: Yup.boolean().required("Required!"),
  },
  {
    label: "Proof of Invitation",
    value: {},
    info: "Proof of Invitation (Upload pdf)",
    excel_field_name: "Proof of Invitation",
    excel_col_width: 20,
    type: "object",
    input_type: "file",
    input_range: "application/pdf",
    required: true,
    db_field: "prof_inv_file",
    validation: Yup.object().when(["inv_paper"], {
      is: true,
      then: Yup.object().shape({
        fname: Yup.string().required(),
        fuid: Yup.string().required(),
      }),
      otherwise: Yup.object().shape({
        //fname: Yup.string().notRequired(),
        //fuid: Yup.string().notRequired(),
      }),
    }),
  },
  {
    label: "First Page of Publication",
    value: {},
    info: "Attachments",
    excel_field_name: "Publication First Page",
    excel_col_width: 20,
    type: "object",
    input_type: "file",
    input_range: "application/pdf",
    required: true,
    db_field: "first_page_pb",
    validation: Yup.object()
      .shape({ fname: Yup.string().required(), fuid: Yup.string().required() })
      .required("Required!"),
  },
];

const PUBLICATION_SCHEMA = {
  sl_no: null,
  fields: PUBLICATION_FIELDS,
};

const getPublicationValidationSchema = () => {
  let publicationValidationSchema = {};
  PUBLICATION_FIELDS.forEach((field) => {
    publicationValidationSchema[field.db_field] = field.validation;
  });
  return Yup.object().shape(publicationValidationSchema);
};

export { PUBLICATION_FIELDS, PUBLICATION_SCHEMA, getPublicationValidationSchema };
